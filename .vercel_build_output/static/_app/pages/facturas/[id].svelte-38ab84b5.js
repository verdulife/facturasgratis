import{S as a,i as e,s as t,e as l,t as s,k as c,c as i,a as n,g as r,d as o,n as d,b as u,f as p,F as v,W as f,G as h,_ as m,h as E,Z as y,Y as I,K as q,J as b,U as x,T as A,L as g,a0 as N,$ as T}from"../../chunks/vendor-1bb6e2c0.js";import{p as C}from"../../chunks/stores-a06af009.js";import{g as D}from"../../chunks/navigation-51f4a605.js";import{b as L,u as P}from"../../chunks/stores-dc0795db.js";import"../../chunks/singletons-12a22614.js";const{document:U}=N;function R(a,e,t){const l=a.slice();return l[34]=e[t],l[35]=e,l[36]=t,l}function w(a){let e,t,I,b,x,A,g,N,T,C,D,L,P,U,R,w,V,F,B,k,S,M,$,H,j,G,z,J,K,W,Y,Z,Q,X,aa,ea,ta,la,sa,ca,ia,na,ra,oa,da,ua,pa,va,fa,ha,ma,Ea,ya,Ia,qa,ba,xa,Aa,ga,Na,Ta,Ca,Da,La,Pa,Ua,Ra,wa,Oa,Va,Fa,Ba,_a,ka,Sa,Ma,$a,Ha,ja,Ga,za,Ja,Ka,Wa,Ya,Za,Qa,Xa,ae,ee,te,le,se,ce,ie,ne,re,oe,de,ue,pe,ve,fe,he,me,Ee,ye,Ie,qe,be,xe,Ae,ge,Ne,Te,Ce,De,Le,Pe,Ue,Re,we,Oe,Ve,Fe,Be,_e,ke,Se,Me,$e,He,je,Ge,ze,Je,Ke,We=a[0].number+"",Ye=a[0].date.day+"",Ze=a[0].date.month+"",Qe=a[0].date.year+"",Xe=a[0].items.length>0&&O(a);return{c(){e=l("section"),t=l("h1"),I=s("Factura nº "),b=s(We),x=c(),A=l("p"),g=s("Con fecha "),N=s(Ye),T=s("/"),C=s(Ze),D=s("/"),L=s(Qe),P=c(),U=l("div"),R=l("button"),w=s("DESCARGAR FACTURA"),V=c(),F=l("button"),B=s("GENERAR ALBARÁN"),k=c(),S=l("button"),M=s("ELIMINAR FACTURA"),$=c(),H=l("form"),j=l("div"),G=l("h2"),z=s("Datos de la factura"),J=c(),K=l("p"),W=s("La numeración y fecha de la factura se rellenan automatiamente, pero puedes modificarlas."),Y=c(),Z=l("div"),Q=l("div"),X=l("label"),aa=s("Número"),ea=c(),ta=l("input"),la=c(),sa=l("div"),ca=l("div"),ia=l("label"),na=s("Día"),ra=c(),oa=l("input"),da=c(),ua=l("div"),pa=l("label"),va=s("Mes"),fa=c(),ha=l("input"),ma=c(),Ea=l("div"),ya=l("label"),Ia=s("Año"),qa=c(),ba=l("input"),xa=c(),Aa=l("div"),ga=l("h2"),Na=s("Datos del cliente"),Ta=c(),Ca=l("p"),Da=s("Cada vez que añadas un cliente nuevo, este se guardara automatiamente."),La=c(),Pa=l("div"),Ua=l("label"),Ra=s("NOMBRE FISCAL"),wa=c(),Oa=l("input"),Va=c(),Fa=l("div"),Ba=l("div"),_a=l("label"),ka=s("CIF/NIF"),Sa=c(),Ma=l("input"),$a=c(),Ha=l("div"),ja=l("label"),Ga=s("Conacto"),za=c(),Ja=l("input"),Ka=c(),Wa=l("div"),Ya=l("div"),Za=l("label"),Qa=s("DIRECCION FISCAL"),Xa=c(),ae=l("input"),ee=c(),te=l("div"),le=l("label"),se=s("Código postal"),ce=c(),ie=l("input"),ne=c(),re=l("div"),oe=l("div"),de=l("label"),ue=s("POBLACIÓN"),pe=c(),ve=l("input"),fe=c(),he=l("div"),me=l("label"),Ee=s("País"),ye=c(),Ie=l("input"),qe=c(),be=l("div"),xe=l("h2"),Ae=s("Conceptos"),ge=c(),Ne=l("p"),Te=s("Cada vez que añadas un producto/servicio nuevo, este se guardara automatiamente."),Ce=c(),Xe&&Xe.c(),De=c(),Le=l("div"),Pe=l("input"),Ue=c(),Re=l("input"),we=c(),Oe=l("input"),Ve=c(),Fe=l("input"),Be=c(),_e=l("div"),ke=s("AÑADIR PRODUCTO/SERVICIO"),Se=c(),Me=l("div"),$e=l("button"),He=s("GUARDAR CAMBIOS"),je=c(),Ge=l("a"),ze=s("CANCELAR"),this.h()},l(a){e=i(a,"SECTION",{class:!0});var l=n(e);t=i(l,"H1",{class:!0});var s=n(t);I=r(s,"Factura nº "),b=r(s,We),s.forEach(o),x=d(l),A=i(l,"P",{class:!0});var c=n(A);g=r(c,"Con fecha "),N=r(c,Ye),T=r(c,"/"),C=r(c,Ze),D=r(c,"/"),L=r(c,Qe),c.forEach(o),P=d(l),U=i(l,"DIV",{class:!0});var u=n(U);R=i(u,"BUTTON",{class:!0});var p=n(R);w=r(p,"DESCARGAR FACTURA"),p.forEach(o),V=d(u),F=i(u,"BUTTON",{class:!0});var v=n(F);B=r(v,"GENERAR ALBARÁN"),v.forEach(o),k=d(u),S=i(u,"BUTTON",{class:!0});var f=n(S);M=r(f,"ELIMINAR FACTURA"),f.forEach(o),u.forEach(o),l.forEach(o),$=d(a),H=i(a,"FORM",{class:!0});var h=n(H);j=i(h,"DIV",{class:!0});var m=n(j);G=i(m,"H2",{});var E=n(G);z=r(E,"Datos de la factura"),E.forEach(o),J=d(m),K=i(m,"P",{class:!0});var y=n(K);W=r(y,"La numeración y fecha de la factura se rellenan automatiamente, pero puedes modificarlas."),y.forEach(o),Y=d(m),Z=i(m,"DIV",{class:!0});var q=n(Z);Q=i(q,"DIV",{class:!0});var O=n(Q);X=i(O,"LABEL",{for:!0,class:!0});var _=n(X);aa=r(_,"Número"),_.forEach(o),ea=d(O),ta=i(O,"INPUT",{type:!0,id:!0,class:!0}),O.forEach(o),la=d(q),sa=i(q,"DIV",{class:!0});var Je=n(sa);ca=i(Je,"DIV",{class:!0});var Ke=n(ca);ia=i(Ke,"LABEL",{for:!0,class:!0});var at=n(ia);na=r(at,"Día"),at.forEach(o),ra=d(Ke),oa=i(Ke,"INPUT",{type:!0,id:!0,min:!0,max:!0,class:!0}),Ke.forEach(o),da=d(Je),ua=i(Je,"DIV",{class:!0});var et=n(ua);pa=i(et,"LABEL",{for:!0,class:!0});var tt=n(pa);va=r(tt,"Mes"),tt.forEach(o),fa=d(et),ha=i(et,"INPUT",{type:!0,id:!0,min:!0,max:!0,class:!0}),et.forEach(o),ma=d(Je),Ea=i(Je,"DIV",{class:!0});var lt=n(Ea);ya=i(lt,"LABEL",{for:!0,class:!0});var st=n(ya);Ia=r(st,"Año"),st.forEach(o),qa=d(lt),ba=i(lt,"INPUT",{type:!0,id:!0,class:!0}),lt.forEach(o),Je.forEach(o),q.forEach(o),m.forEach(o),xa=d(h),Aa=i(h,"DIV",{class:!0});var ct=n(Aa);ga=i(ct,"H2",{});var it=n(ga);Na=r(it,"Datos del cliente"),it.forEach(o),Ta=d(ct),Ca=i(ct,"P",{class:!0});var nt=n(Ca);Da=r(nt,"Cada vez que añadas un cliente nuevo, este se guardara automatiamente."),nt.forEach(o),La=d(ct),Pa=i(ct,"DIV",{class:!0});var rt=n(Pa);Ua=i(rt,"LABEL",{for:!0,class:!0});var ot=n(Ua);Ra=r(ot,"NOMBRE FISCAL"),ot.forEach(o),wa=d(rt),Oa=i(rt,"INPUT",{type:!0,id:!0,class:!0}),rt.forEach(o),Va=d(ct),Fa=i(ct,"DIV",{class:!0});var dt=n(Fa);Ba=i(dt,"DIV",{class:!0});var ut=n(Ba);_a=i(ut,"LABEL",{for:!0,class:!0});var pt=n(_a);ka=r(pt,"CIF/NIF"),pt.forEach(o),Sa=d(ut),Ma=i(ut,"INPUT",{type:!0,id:!0,class:!0}),ut.forEach(o),$a=d(dt),Ha=i(dt,"DIV",{class:!0});var vt=n(Ha);ja=i(vt,"LABEL",{for:!0,class:!0});var ft=n(ja);Ga=r(ft,"Conacto"),ft.forEach(o),za=d(vt),Ja=i(vt,"INPUT",{type:!0,id:!0,class:!0}),vt.forEach(o),dt.forEach(o),Ka=d(ct),Wa=i(ct,"DIV",{class:!0});var ht=n(Wa);Ya=i(ht,"DIV",{class:!0});var mt=n(Ya);Za=i(mt,"LABEL",{for:!0,class:!0});var Et=n(Za);Qa=r(Et,"DIRECCION FISCAL"),Et.forEach(o),Xa=d(mt),ae=i(mt,"INPUT",{type:!0,id:!0,class:!0}),mt.forEach(o),ee=d(ht),te=i(ht,"DIV",{class:!0});var yt=n(te);le=i(yt,"LABEL",{for:!0,class:!0});var It=n(le);se=r(It,"Código postal"),It.forEach(o),ce=d(yt),ie=i(yt,"INPUT",{type:!0,id:!0,class:!0}),yt.forEach(o),ht.forEach(o),ne=d(ct),re=i(ct,"DIV",{class:!0});var qt=n(re);oe=i(qt,"DIV",{class:!0});var bt=n(oe);de=i(bt,"LABEL",{for:!0,class:!0});var xt=n(de);ue=r(xt,"POBLACIÓN"),xt.forEach(o),pe=d(bt),ve=i(bt,"INPUT",{type:!0,id:!0,class:!0}),bt.forEach(o),fe=d(qt),he=i(qt,"DIV",{class:!0});var At=n(he);me=i(At,"LABEL",{for:!0,class:!0});var gt=n(me);Ee=r(gt,"País"),gt.forEach(o),ye=d(At),Ie=i(At,"INPUT",{type:!0,id:!0,class:!0}),At.forEach(o),qt.forEach(o),ct.forEach(o),qe=d(h),be=i(h,"DIV",{class:!0});var Nt=n(be);xe=i(Nt,"H2",{});var Tt=n(xe);Ae=r(Tt,"Conceptos"),Tt.forEach(o),ge=d(Nt),Ne=i(Nt,"P",{class:!0});var Ct=n(Ne);Te=r(Ct,"Cada vez que añadas un producto/servicio nuevo, este se guardara automatiamente."),Ct.forEach(o),Ce=d(Nt),Xe&&Xe.l(Nt),De=d(Nt),Le=i(Nt,"DIV",{class:!0});var Dt=n(Le);Pe=i(Dt,"INPUT",{type:!0,id:!0,min:!0,class:!0,placeholder:!0}),Ue=d(Dt),Re=i(Dt,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),we=d(Dt),Oe=i(Dt,"INPUT",{type:!0,id:!0,min:!0,max:!0,class:!0,placeholder:!0}),Ve=d(Dt),Fe=i(Dt,"INPUT",{type:!0,id:!0,step:!0,class:!0,placeholder:!0}),Dt.forEach(o),Be=d(Nt),_e=i(Nt,"DIV",{class:!0});var Lt=n(_e);ke=r(Lt,"AÑADIR PRODUCTO/SERVICIO"),Lt.forEach(o),Nt.forEach(o),Se=d(h),Me=i(h,"DIV",{class:!0});var Pt=n(Me);$e=i(Pt,"BUTTON",{class:!0});var Ut=n($e);He=r(Ut,"GUARDAR CAMBIOS"),Ut.forEach(o),je=d(Pt),Ge=i(Pt,"A",{href:!0,class:!0});var Rt=n(Ge);ze=r(Rt,"CANCELAR"),Rt.forEach(o),Pt.forEach(o),h.forEach(o),this.h()},h(){u(t,"class","svelte-onqdit"),u(A,"class","svelte-onqdit"),u(R,"class","succ semi svelte-onqdit"),u(F,"class","link semi svelte-onqdit"),u(S,"class","err semi svelte-onqdit"),u(U,"class","io-wrapper row jcenter xfill svelte-onqdit"),u(e,"class","header col fcenter xfill svelte-onqdit"),u(K,"class","notice svelte-onqdit"),u(X,"for","legal_name"),u(X,"class","svelte-onqdit"),u(ta,"type","number"),u(ta,"id","legal_name"),u(ta,"class","xfill svelte-onqdit"),ta.required=!0,u(Q,"class","input-wrapper col grow svelte-onqdit"),u(ia,"for","day"),u(ia,"class","svelte-onqdit"),u(oa,"type","number"),u(oa,"id","day"),u(oa,"min","1"),u(oa,"max","31"),u(oa,"class","xfill svelte-onqdit"),oa.required=!0,u(ca,"class","input-wrapper date col svelte-onqdit"),u(pa,"for","month"),u(pa,"class","svelte-onqdit"),u(ha,"type","number"),u(ha,"id","month"),u(ha,"min","1"),u(ha,"max","12"),u(ha,"class","xfill svelte-onqdit"),ha.required=!0,u(ua,"class","input-wrapper date col svelte-onqdit"),u(ya,"for","year"),u(ya,"class","svelte-onqdit"),u(ba,"type","number"),u(ba,"id","year"),u(ba,"class","xfill svelte-onqdit"),ba.required=!0,u(Ea,"class","input-wrapper date col svelte-onqdit"),u(sa,"class","date-row row xhalf svelte-onqdit"),u(Z,"class","row xfill"),u(j,"class","box round col xfill svelte-onqdit"),u(Ca,"class","notice svelte-onqdit"),u(Ua,"for","legal_name"),u(Ua,"class","svelte-onqdit"),u(Oa,"type","text"),u(Oa,"id","leagal_name"),u(Oa,"class","xfill svelte-onqdit"),Oa.required=!0,u(Pa,"class","input-wrapper col xfill svelte-onqdit"),u(_a,"for","legal_id"),u(_a,"class","svelte-onqdit"),u(Ma,"type","text"),u(Ma,"id","leagal_id"),u(Ma,"class","xfill svelte-onqdit"),Ma.required=!0,u(Ba,"class","input-wrapper col xhalf svelte-onqdit"),u(ja,"for","contact"),u(ja,"class","svelte-onqdit"),u(Ja,"type","text"),u(Ja,"id","contact"),u(Ja,"class","xfill svelte-onqdit"),Ja.required=!0,u(Ha,"class","input-wrapper col xhalf svelte-onqdit"),u(Fa,"class","row xfill"),u(Za,"for","address"),u(Za,"class","svelte-onqdit"),u(ae,"type","text"),u(ae,"id","address"),u(ae,"class","xfill svelte-onqdit"),ae.required=!0,u(Ya,"class","input-wrapper col xhalf svelte-onqdit"),u(le,"for","cp"),u(le,"class","svelte-onqdit"),u(ie,"type","text"),u(ie,"id","cp"),u(ie,"class","xfill svelte-onqdit"),ie.required=!0,u(te,"class","col xhalf"),u(Wa,"class","row xfill"),u(de,"for","city"),u(de,"class","svelte-onqdit"),u(ve,"type","text"),u(ve,"id","city"),u(ve,"class","xfill svelte-onqdit"),ve.required=!0,u(oe,"class","input-wrapper col xhalf svelte-onqdit"),u(me,"for","country"),u(me,"class","svelte-onqdit"),u(Ie,"type","text"),u(Ie,"id","country"),u(Ie,"class","xfill svelte-onqdit"),Ie.required=!0,u(he,"class","input-wrapper col xhalf svelte-onqdit"),u(re,"class","row xfill"),u(Aa,"class","box round col xfill svelte-onqdit"),u(Ne,"class","notice svelte-onqdit"),u(Pe,"type","number"),u(Pe,"id","amount"),u(Pe,"min","1"),u(Pe,"class","out svelte-onqdit"),u(Pe,"placeholder","CANT"),u(Re,"type","text"),u(Re,"id","label"),u(Re,"class","out grow svelte-onqdit"),u(Re,"placeholder","CONCEPTO"),u(Oe,"type","number"),u(Oe,"id","dto"),u(Oe,"min","0"),u(Oe,"max","100"),u(Oe,"class","out svelte-onqdit"),u(Oe,"placeholder","DTO %"),u(Fe,"type","number"),u(Fe,"id","price"),u(Fe,"step","0.01"),u(Fe,"class","out svelte-onqdit"),u(Fe,"placeholder","UNIDAD €"),u(Le,"class","new-line row xfill"),u(_e,"class","line-btn pri xfill svelte-onqdit"),u(be,"class","box round col xfill svelte-onqdit"),u($e,"class","succ semi svelte-onqdit"),u(Ge,"href","/facturas"),u(Ge,"class","btn out semi svelte-onqdit"),u(Me,"class","row jcenter xfill"),u(H,"class","bill-data col acenter xfill svelte-onqdit")},m(l,s){p(l,e,s),v(e,t),v(t,I),v(t,b),v(e,x),v(e,A),v(A,g),v(A,N),v(A,T),v(A,C),v(A,D),v(A,L),v(e,P),v(e,U),v(U,R),v(R,w),v(U,V),v(U,F),v(F,B),v(U,k),v(U,S),v(S,M),p(l,$,s),p(l,H,s),v(H,j),v(j,G),v(G,z),v(j,J),v(j,K),v(K,W),v(j,Y),v(j,Z),v(Z,Q),v(Q,X),v(X,aa),v(Q,ea),v(Q,ta),f(ta,a[0].number),v(Z,la),v(Z,sa),v(sa,ca),v(ca,ia),v(ia,na),v(ca,ra),v(ca,oa),f(oa,a[0].date.day),v(sa,da),v(sa,ua),v(ua,pa),v(pa,va),v(ua,fa),v(ua,ha),f(ha,a[0].date.month),v(sa,ma),v(sa,Ea),v(Ea,ya),v(ya,Ia),v(Ea,qa),v(Ea,ba),f(ba,a[0].date.year),v(H,xa),v(H,Aa),v(Aa,ga),v(ga,Na),v(Aa,Ta),v(Aa,Ca),v(Ca,Da),v(Aa,La),v(Aa,Pa),v(Pa,Ua),v(Ua,Ra),v(Pa,wa),v(Pa,Oa),f(Oa,a[0].client.legal_name),v(Aa,Va),v(Aa,Fa),v(Fa,Ba),v(Ba,_a),v(_a,ka),v(Ba,Sa),v(Ba,Ma),f(Ma,a[0].client.legal_id),v(Fa,$a),v(Fa,Ha),v(Ha,ja),v(ja,Ga),v(Ha,za),v(Ha,Ja),f(Ja,a[0].client.contact),v(Aa,Ka),v(Aa,Wa),v(Wa,Ya),v(Ya,Za),v(Za,Qa),v(Ya,Xa),v(Ya,ae),f(ae,a[0].client.address),v(Wa,ee),v(Wa,te),v(te,le),v(le,se),v(te,ce),v(te,ie),f(ie,a[0].client.cp),v(Aa,ne),v(Aa,re),v(re,oe),v(oe,de),v(de,ue),v(oe,pe),v(oe,ve),f(ve,a[0].client.city),v(re,fe),v(re,he),v(he,me),v(me,Ee),v(he,ye),v(he,Ie),f(Ie,a[0].client.country),v(H,qe),v(H,be),v(be,xe),v(xe,Ae),v(be,ge),v(be,Ne),v(Ne,Te),v(be,Ce),Xe&&Xe.m(be,null),v(be,De),v(be,Le),v(Le,Pe),f(Pe,a[5].amount),v(Le,Ue),v(Le,Re),f(Re,a[5].label),v(Le,we),v(Le,Oe),f(Oe,a[5].dto),v(Le,Ve),v(Le,Fe),f(Fe,a[5].price),v(be,Be),v(be,_e),v(_e,ke),v(H,Se),v(H,Me),v(Me,$e),v($e,He),v(Me,je),v(Me,Ge),v(Ge,ze),Je||(Ke=[h(R,"click",a[7]),h(F,"click",_),h(S,"click",a[8]),h(ta,"input",a[12]),h(oa,"input",a[13]),h(ha,"input",a[14]),h(ba,"input",a[15]),h(Oa,"input",a[16]),h(Ma,"input",a[17]),h(Ja,"input",a[18]),h(ae,"input",a[19]),h(ie,"input",a[20]),h(ve,"input",a[21]),h(Ie,"input",a[22]),h(Pe,"input",a[28]),h(Re,"input",a[29]),h(Oe,"input",a[30]),h(Fe,"input",a[31]),h(_e,"click",a[9]),h(H,"submit",m(a[11]))],Je=!0)},p(a,e){1&e[0]&&We!==(We=a[0].number+"")&&E(b,We),1&e[0]&&Ye!==(Ye=a[0].date.day+"")&&E(N,Ye),1&e[0]&&Ze!==(Ze=a[0].date.month+"")&&E(C,Ze),1&e[0]&&Qe!==(Qe=a[0].date.year+"")&&E(L,Qe),1&e[0]&&y(ta.value)!==a[0].number&&f(ta,a[0].number),1&e[0]&&y(oa.value)!==a[0].date.day&&f(oa,a[0].date.day),1&e[0]&&y(ha.value)!==a[0].date.month&&f(ha,a[0].date.month),1&e[0]&&y(ba.value)!==a[0].date.year&&f(ba,a[0].date.year),1&e[0]&&Oa.value!==a[0].client.legal_name&&f(Oa,a[0].client.legal_name),1&e[0]&&Ma.value!==a[0].client.legal_id&&f(Ma,a[0].client.legal_id),1&e[0]&&Ja.value!==a[0].client.contact&&f(Ja,a[0].client.contact),1&e[0]&&ae.value!==a[0].client.address&&f(ae,a[0].client.address),1&e[0]&&ie.value!==a[0].client.cp&&f(ie,a[0].client.cp),1&e[0]&&ve.value!==a[0].client.city&&f(ve,a[0].client.city),1&e[0]&&Ie.value!==a[0].client.country&&f(Ie,a[0].client.country),a[0].items.length>0?Xe?Xe.p(a,e):(Xe=O(a),Xe.c(),Xe.m(be,De)):Xe&&(Xe.d(1),Xe=null),32&e[0]&&y(Pe.value)!==a[5].amount&&f(Pe,a[5].amount),32&e[0]&&Re.value!==a[5].label&&f(Re,a[5].label),32&e[0]&&y(Oe.value)!==a[5].dto&&f(Oe,a[5].dto),32&e[0]&&y(Fe.value)!==a[5].price&&f(Fe,a[5].price)},d(a){a&&o(e),a&&o($),a&&o(H),Xe&&Xe.d(),Je=!1,q(Ke)}}}function O(a){let e,t,f,h,m,y,q,x,A,g,N,T,C,D,L,P,U,w,O,B,_,k,S,M,$,H,j,G,z,J,K,W,Y,Z=a[3]().toFixed(2)+"",Q=a[4].iva+"",X=a[2]().toFixed(2)+"",aa=a[6]().toFixed(2)+"",ea=a[0].items,ta=[];for(let l=0;l<ea.length;l+=1)ta[l]=V(R(a,ea,l));let la=a[4].ret&&F(a);return{c(){e=l("ul");for(let a=0;a<ta.length;a+=1)ta[a].c();t=c(),f=l("h-div"),h=c(),m=l("ul"),y=l("li"),q=l("p"),x=s("Base imponible"),A=c(),g=l("h3"),N=s(Z),T=s("€"),C=c(),D=l("li"),L=l("p"),P=s("IVA "),U=s(Q),w=s("%"),O=c(),B=l("h3"),_=s(X),k=s("€"),S=c(),la&&la.c(),M=c(),$=l("li"),H=l("p"),j=s("Total"),G=c(),z=l("h3"),J=s(aa),K=s("€"),W=c(),Y=l("h-div"),this.h()},l(a){e=i(a,"UL",{class:!0});var l=n(e);for(let e=0;e<ta.length;e+=1)ta[e].l(l);l.forEach(o),t=d(a),f=i(a,"H-DIV",{class:!0}),n(f).forEach(o),h=d(a),m=i(a,"UL",{class:!0});var s=n(m);y=i(s,"LI",{class:!0});var c=n(y);q=i(c,"P",{class:!0});var u=n(q);x=r(u,"Base imponible"),u.forEach(o),A=d(c),g=i(c,"H3",{});var p=n(g);N=r(p,Z),T=r(p,"€"),p.forEach(o),c.forEach(o),C=d(s),D=i(s,"LI",{class:!0});var v=n(D);L=i(v,"P",{class:!0});var E=n(L);P=r(E,"IVA "),U=r(E,Q),w=r(E,"%"),E.forEach(o),O=d(v),B=i(v,"H3",{});var I=n(B);_=r(I,X),k=r(I,"€"),I.forEach(o),v.forEach(o),S=d(s),la&&la.l(s),M=d(s),$=i(s,"LI",{class:!0});var b=n($);H=i(b,"P",{class:!0});var R=n(H);j=r(R,"Total"),R.forEach(o),G=d(b),z=i(b,"H3",{});var V=n(z);J=r(V,aa),K=r(V,"€"),V.forEach(o),b.forEach(o),s.forEach(o),W=d(a),Y=i(a,"H-DIV",{class:!0}),n(Y).forEach(o),this.h()},h(){u(e,"class","bill-items col acenter xfill"),I(f,"class","svelte-onqdit"),u(q,"class","label"),u(y,"class","col acenter svelte-onqdit"),u(L,"class","label"),u(D,"class","col acenter svelte-onqdit"),u(H,"class","label"),u($,"class","col acenter svelte-onqdit"),u(m,"class","total-wrapper row jaround xfill svelte-onqdit"),I(Y,"class","svelte-onqdit")},m(a,l){p(a,e,l);for(let t=0;t<ta.length;t+=1)ta[t].m(e,null);p(a,t,l),p(a,f,l),p(a,h,l),p(a,m,l),v(m,y),v(y,q),v(q,x),v(y,A),v(y,g),v(g,N),v(g,T),v(m,C),v(m,D),v(D,L),v(L,P),v(L,U),v(L,w),v(D,O),v(D,B),v(B,_),v(B,k),v(m,S),la&&la.m(m,null),v(m,M),v(m,$),v($,H),v(H,j),v($,G),v($,z),v(z,J),v(z,K),p(a,W,l),p(a,Y,l)},p(a,t){if(1025&t[0]){let l;for(ea=a[0].items,l=0;l<ea.length;l+=1){const s=R(a,ea,l);ta[l]?ta[l].p(s,t):(ta[l]=V(s),ta[l].c(),ta[l].m(e,null))}for(;l<ta.length;l+=1)ta[l].d(1);ta.length=ea.length}8&t[0]&&Z!==(Z=a[3]().toFixed(2)+"")&&E(N,Z),16&t[0]&&Q!==(Q=a[4].iva+"")&&E(U,Q),4&t[0]&&X!==(X=a[2]().toFixed(2)+"")&&E(_,X),a[4].ret?la?la.p(a,t):(la=F(a),la.c(),la.m(m,M)):la&&(la.d(1),la=null),64&t[0]&&aa!==(aa=a[6]().toFixed(2)+"")&&E(J,aa)},d(a){a&&o(e),b(ta,a),a&&o(t),a&&o(f),a&&o(h),a&&o(m),la&&la.d(),a&&o(W),a&&o(Y)}}}function V(a){let e,t,s,r,m,E,I,b,x,A,g,N,T;function C(){a[23].call(t,a[35],a[36])}function D(){a[24].call(r,a[35],a[36])}function L(){a[25].call(E,a[35],a[36])}function P(){a[26].call(b,a[35],a[36])}function U(){return a[27](a[36])}return{c(){e=l("li"),t=l("input"),s=c(),r=l("input"),m=c(),E=l("input"),I=c(),b=l("input"),x=c(),A=l("input"),g=c(),this.h()},l(a){e=i(a,"LI",{class:!0});var l=n(e);t=i(l,"INPUT",{type:!0,id:!0,min:!0,class:!0,placeholder:!0}),s=d(l),r=i(l,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),m=d(l),E=i(l,"INPUT",{type:!0,id:!0,min:!0,max:!0,class:!0,placeholder:!0}),I=d(l),b=i(l,"INPUT",{type:!0,id:!0,step:!0,class:!0,placeholder:!0}),x=d(l),A=i(l,"INPUT",{type:!0,class:!0}),g=d(l),l.forEach(o),this.h()},h(){u(t,"type","number"),u(t,"id","amount"),u(t,"min","1"),u(t,"class","out svelte-onqdit"),u(t,"placeholder","CANT"),u(r,"type","text"),u(r,"id","label"),u(r,"class","out grow svelte-onqdit"),u(r,"placeholder","CONCEPTO"),u(E,"type","number"),u(E,"id","dto"),u(E,"min","0"),u(E,"max","100"),u(E,"class","out svelte-onqdit"),u(E,"placeholder","DTO %"),u(b,"type","number"),u(b,"id","price"),u(b,"step","0.01"),u(b,"class","out svelte-onqdit"),u(b,"placeholder","UNIDAD €"),u(A,"type","text"),A.value="x",u(A,"class","out svelte-onqdit"),u(e,"class","line row xfill svelte-onqdit")},m(l,c){p(l,e,c),v(e,t),f(t,a[34].amount),v(e,s),v(e,r),f(r,a[34].label),v(e,m),v(e,E),f(E,a[34].dto),v(e,I),v(e,b),f(b,a[34].price),v(e,x),v(e,A),v(e,g),N||(T=[h(t,"input",C),h(r,"input",D),h(E,"input",L),h(b,"input",P),h(A,"click",U)],N=!0)},p(e,l){a=e,1&l[0]&&y(t.value)!==a[34].amount&&f(t,a[34].amount),1&l[0]&&r.value!==a[34].label&&f(r,a[34].label),1&l[0]&&y(E.value)!==a[34].dto&&f(E,a[34].dto),1&l[0]&&y(b.value)!==a[34].price&&f(b,a[34].price)},d(a){a&&o(e),N=!1,q(T)}}}function F(a){let e,t,f,h,m,y,I,q,b,x,A=a[4].ret+"",g=a[1]().toFixed(2)+"";return{c(){e=l("li"),t=l("p"),f=s("IRPF "),h=s(A),m=s("%"),y=c(),I=l("h3"),q=s("-"),b=s(g),x=s("€"),this.h()},l(a){e=i(a,"LI",{class:!0});var l=n(e);t=i(l,"P",{class:!0});var s=n(t);f=r(s,"IRPF "),h=r(s,A),m=r(s,"%"),s.forEach(o),y=d(l),I=i(l,"H3",{});var c=n(I);q=r(c,"-"),b=r(c,g),x=r(c,"€"),c.forEach(o),l.forEach(o),this.h()},h(){u(t,"class","label"),u(e,"class","col acenter svelte-onqdit")},m(a,l){p(a,e,l),v(e,t),v(t,f),v(t,h),v(t,m),v(e,y),v(e,I),v(I,q),v(I,b),v(I,x)},p(a,e){16&e[0]&&A!==(A=a[4].ret+"")&&E(h,A),2&e[0]&&g!==(g=a[1]().toFixed(2)+"")&&E(b,g)},d(a){a&&o(e)}}}function B(a){let e,t,s,r,f,h,m=a[0]&&w(a);return{c(){e=l("meta"),t=l("meta"),s=l("meta"),r=l("meta"),f=c(),h=l("div"),m&&m.c(),this.h()},l(a){const l=x('[data-svelte="svelte-zpfq6b"]',U.head);e=i(l,"META",{property:!0,content:!0}),t=i(l,"META",{property:!0,content:!0}),s=i(l,"META",{name:!0,content:!0}),r=i(l,"META",{property:!0,content:!0}),l.forEach(o),f=d(a),h=i(a,"DIV",{class:!0});var c=n(h);m&&m.l(c),c.forEach(o),this.h()},h(){U.title="Editar factura | Facturas gratis",u(e,"property","og:title"),u(e,"content","Editar factura | Facturas gratis"),u(t,"property","og:site_name"),u(t,"content","Facturas gratis"),u(s,"name","description"),u(s,"content","Herramientas online y completamente gratuitas para generar, enviar, rectificar y listar facturas, presupuestos, albaranes,\r\n  clientes, proveedores y productos/servicios."),u(r,"property","og:description"),u(r,"content","Herramientas online y completamente gratuitas para generar, enviar, rectificar y listar facturas, presupuestos, albaranes,\r\n  clientes, proveedores y productos/servicios."),u(h,"class","scroll")},m(a,l){v(U.head,e),v(U.head,t),v(U.head,s),v(U.head,r),p(a,f,l),p(a,h,l),m&&m.m(h,null)},p(a,e){a[0]?m?m.p(a,e):(m=w(a),m.c(),m.m(h,null)):m&&(m.d(1),m=null)},i:A,o:A,d(a){o(e),o(t),o(s),o(r),a&&o(f),a&&o(h),m&&m.d()}}}function _(){console.log("Generating...")}function k(a,e,t){let l,s,c,i,n,r,o;g(a,L,(a=>t(32,n=a))),g(a,P,(a=>t(4,r=a))),g(a,C,(a=>t(33,o=a)));let d=n.filter((a=>a._id===o.params.id))[0],u={};function p(a){d.items.splice(a,1),t(0,d)}return a.$$.update=()=>{1&a.$$.dirty[0]&&t(3,l=()=>d.items.reduce(((a,e)=>{const t=e.price*e.amount;if(e.dto>0){return a+(t-t*e.dto/100)}return a+t}),0)),24&a.$$.dirty[0]&&t(2,s=()=>l()*r.iva/100),24&a.$$.dirty[0]&&t(1,c=()=>{if(!r.ret)return 0;return l()*r.ret/100}),14&a.$$.dirty[0]&&t(6,i=()=>l()+s()-c())},[d,c,s,l,r,u,i,async function(){try{const a=await fetch("/api/print",{method:"POST","Content-Type":"application/json",body:JSON.stringify(d)});if(!a.ok)throw await a.text();const e=await a.blob(),t=window.URL.createObjectURL(e),l=document.createElement("a");l.href=t,l.download=`Factura_${d.number}_${d.client.legal_id}.pdf`,l.click()}catch(a){console.log(a),alert("Algo ha salido mal. Vuelve a intentarlo")}},function(){confirm("La numeracion de las otras facturas no se modificara. Recuerda usar la numeracion de esta factura en otra.\n\n¿Borrar definitivamente?")&&(n.splice(n.indexOf(d),1),L.set(n),D("/facturas"))},function(){4===Object.keys(u).length&&(t(0,d.items=[...d.items,u],d),t(5,u={}))},p,function(){d.items.length>0?(t(0,d.totals={base:l(),iva:s(),ret:c(),total:i()},d),T(L,n=n.map((a=>a._id===d._id?d:a)),n),D("/facturas")):alert("⚠ No has añadido ningun concepto ⚠")},function(){d.number=y(this.value),t(0,d)},function(){d.date.day=y(this.value),t(0,d)},function(){d.date.month=y(this.value),t(0,d)},function(){d.date.year=y(this.value),t(0,d)},function(){d.client.legal_name=this.value,t(0,d)},function(){d.client.legal_id=this.value,t(0,d)},function(){d.client.contact=this.value,t(0,d)},function(){d.client.address=this.value,t(0,d)},function(){d.client.cp=this.value,t(0,d)},function(){d.client.city=this.value,t(0,d)},function(){d.client.country=this.value,t(0,d)},function(a,e){a[e].amount=y(this.value),t(0,d)},function(a,e){a[e].label=this.value,t(0,d)},function(a,e){a[e].dto=y(this.value),t(0,d)},function(a,e){a[e].price=y(this.value),t(0,d)},a=>p(a),function(){u.amount=y(this.value),t(5,u)},function(){u.label=this.value,t(5,u)},function(){u.dto=y(this.value),t(5,u)},function(){u.price=y(this.value),t(5,u)}]}class S extends a{constructor(a){super(),e(this,a,k,B,t,{},null,[-1,-1])}}export{S as default};

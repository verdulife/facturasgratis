import{S as a,i as e,s as t,e as l,t as s,k as c,c as i,a as n,g as o,d as r,n as d,b as u,f as p,F as v,W as f,G as h,_ as m,h as E,Z as y,Y as I,K as q,J as x,U as b,T as A,L as g,$ as N}from"../../chunks/vendor-1bb6e2c0.js";import{p as T}from"../../chunks/stores-a06af009.js";import{g as C}from"../../chunks/navigation-51f4a605.js";import{b as D,u as L}from"../../chunks/stores-dc0795db.js";import"../../chunks/singletons-12a22614.js";function P(a,e,t){const l=a.slice();return l[34]=e[t],l[35]=e,l[36]=t,l}function U(a){let e,t,I,x,b,A,g,N,T,C,D,L,P,U,w,O,V,B,_,k,S,M,H,j,$,G,z,J,K,W,Y,Z,Q,X,aa,ea,ta,la,sa,ca,ia,na,oa,ra,da,ua,pa,va,fa,ha,ma,Ea,ya,Ia,qa,xa,ba,Aa,ga,Na,Ta,Ca,Da,La,Pa,Ua,Ra,wa,Oa,Va,Fa,Ba,_a,ka,Sa,Ma,Ha,ja,$a,Ga,za,Ja,Ka,Wa,Ya,Za,Qa,Xa,ae,ee,te,le,se,ce,ie,ne,oe,re,de,ue,pe,ve,fe,he,me,Ee,ye,Ie,qe,xe,be,Ae,ge,Ne,Te,Ce,De,Le,Pe,Ue,Re,we,Oe,Ve,Fe,Be,_e,ke,Se,Me,He,je,$e,Ge,ze,Je,Ke,We=a[0].number+"",Ye=a[0].date.day+"",Ze=a[0].date.month+"",Qe=a[0].date.year+"",Xe=a[0].items.length>0&&R(a);return{c(){e=l("section"),t=l("h1"),I=s("Factura nº "),x=s(We),b=c(),A=l("p"),g=s("Con fecha "),N=s(Ye),T=s("/"),C=s(Ze),D=s("/"),L=s(Qe),P=c(),U=l("div"),w=l("button"),O=s("DESCARGAR FACTURA"),V=c(),B=l("button"),_=s("GENERAR ALBARÁN"),k=c(),S=l("button"),M=s("ELIMINAR FACTURA"),H=c(),j=l("form"),$=l("div"),G=l("h2"),z=s("Datos de la factura"),J=c(),K=l("p"),W=s("La numeración y fecha de la factura se rellenan automatiamente, pero puedes modificarlas."),Y=c(),Z=l("div"),Q=l("div"),X=l("label"),aa=s("Número"),ea=c(),ta=l("input"),la=c(),sa=l("div"),ca=l("div"),ia=l("label"),na=s("Día"),oa=c(),ra=l("input"),da=c(),ua=l("div"),pa=l("label"),va=s("Mes"),fa=c(),ha=l("input"),ma=c(),Ea=l("div"),ya=l("label"),Ia=s("Año"),qa=c(),xa=l("input"),ba=c(),Aa=l("div"),ga=l("h2"),Na=s("Datos del cliente"),Ta=c(),Ca=l("p"),Da=s("Cada vez que añadas un cliente nuevo, este se guardara automatiamente."),La=c(),Pa=l("div"),Ua=l("label"),Ra=s("NOMBRE FISCAL"),wa=c(),Oa=l("input"),Va=c(),Fa=l("div"),Ba=l("div"),_a=l("label"),ka=s("CIF/NIF"),Sa=c(),Ma=l("input"),Ha=c(),ja=l("div"),$a=l("label"),Ga=s("Conacto"),za=c(),Ja=l("input"),Ka=c(),Wa=l("div"),Ya=l("div"),Za=l("label"),Qa=s("DIRECCION FISCAL"),Xa=c(),ae=l("input"),ee=c(),te=l("div"),le=l("label"),se=s("Código postal"),ce=c(),ie=l("input"),ne=c(),oe=l("div"),re=l("div"),de=l("label"),ue=s("POBLACIÓN"),pe=c(),ve=l("input"),fe=c(),he=l("div"),me=l("label"),Ee=s("País"),ye=c(),Ie=l("input"),qe=c(),xe=l("div"),be=l("h2"),Ae=s("Conceptos"),ge=c(),Ne=l("p"),Te=s("Cada vez que añadas un producto/servicio nuevo, este se guardara automatiamente."),Ce=c(),Xe&&Xe.c(),De=c(),Le=l("div"),Pe=l("input"),Ue=c(),Re=l("input"),we=c(),Oe=l("input"),Ve=c(),Fe=l("input"),Be=c(),_e=l("div"),ke=s("AÑADIR PRODUCTO/SERVICIO"),Se=c(),Me=l("div"),He=l("button"),je=s("GUARDAR CAMBIOS"),$e=c(),Ge=l("a"),ze=s("CANCELAR"),this.h()},l(a){e=i(a,"SECTION",{class:!0});var l=n(e);t=i(l,"H1",{class:!0});var s=n(t);I=o(s,"Factura nº "),x=o(s,We),s.forEach(r),b=d(l),A=i(l,"P",{class:!0});var c=n(A);g=o(c,"Con fecha "),N=o(c,Ye),T=o(c,"/"),C=o(c,Ze),D=o(c,"/"),L=o(c,Qe),c.forEach(r),P=d(l),U=i(l,"DIV",{class:!0});var u=n(U);w=i(u,"BUTTON",{class:!0});var p=n(w);O=o(p,"DESCARGAR FACTURA"),p.forEach(r),V=d(u),B=i(u,"BUTTON",{class:!0});var v=n(B);_=o(v,"GENERAR ALBARÁN"),v.forEach(r),k=d(u),S=i(u,"BUTTON",{class:!0});var f=n(S);M=o(f,"ELIMINAR FACTURA"),f.forEach(r),u.forEach(r),l.forEach(r),H=d(a),j=i(a,"FORM",{class:!0});var h=n(j);$=i(h,"DIV",{class:!0});var m=n($);G=i(m,"H2",{});var E=n(G);z=o(E,"Datos de la factura"),E.forEach(r),J=d(m),K=i(m,"P",{class:!0});var y=n(K);W=o(y,"La numeración y fecha de la factura se rellenan automatiamente, pero puedes modificarlas."),y.forEach(r),Y=d(m),Z=i(m,"DIV",{class:!0});var q=n(Z);Q=i(q,"DIV",{class:!0});var R=n(Q);X=i(R,"LABEL",{for:!0,class:!0});var F=n(X);aa=o(F,"Número"),F.forEach(r),ea=d(R),ta=i(R,"INPUT",{type:!0,id:!0,class:!0}),R.forEach(r),la=d(q),sa=i(q,"DIV",{class:!0});var Je=n(sa);ca=i(Je,"DIV",{class:!0});var Ke=n(ca);ia=i(Ke,"LABEL",{for:!0,class:!0});var at=n(ia);na=o(at,"Día"),at.forEach(r),oa=d(Ke),ra=i(Ke,"INPUT",{type:!0,id:!0,min:!0,max:!0,class:!0}),Ke.forEach(r),da=d(Je),ua=i(Je,"DIV",{class:!0});var et=n(ua);pa=i(et,"LABEL",{for:!0,class:!0});var tt=n(pa);va=o(tt,"Mes"),tt.forEach(r),fa=d(et),ha=i(et,"INPUT",{type:!0,id:!0,min:!0,max:!0,class:!0}),et.forEach(r),ma=d(Je),Ea=i(Je,"DIV",{class:!0});var lt=n(Ea);ya=i(lt,"LABEL",{for:!0,class:!0});var st=n(ya);Ia=o(st,"Año"),st.forEach(r),qa=d(lt),xa=i(lt,"INPUT",{type:!0,id:!0,class:!0}),lt.forEach(r),Je.forEach(r),q.forEach(r),m.forEach(r),ba=d(h),Aa=i(h,"DIV",{class:!0});var ct=n(Aa);ga=i(ct,"H2",{});var it=n(ga);Na=o(it,"Datos del cliente"),it.forEach(r),Ta=d(ct),Ca=i(ct,"P",{class:!0});var nt=n(Ca);Da=o(nt,"Cada vez que añadas un cliente nuevo, este se guardara automatiamente."),nt.forEach(r),La=d(ct),Pa=i(ct,"DIV",{class:!0});var ot=n(Pa);Ua=i(ot,"LABEL",{for:!0,class:!0});var rt=n(Ua);Ra=o(rt,"NOMBRE FISCAL"),rt.forEach(r),wa=d(ot),Oa=i(ot,"INPUT",{type:!0,id:!0,class:!0}),ot.forEach(r),Va=d(ct),Fa=i(ct,"DIV",{class:!0});var dt=n(Fa);Ba=i(dt,"DIV",{class:!0});var ut=n(Ba);_a=i(ut,"LABEL",{for:!0,class:!0});var pt=n(_a);ka=o(pt,"CIF/NIF"),pt.forEach(r),Sa=d(ut),Ma=i(ut,"INPUT",{type:!0,id:!0,class:!0}),ut.forEach(r),Ha=d(dt),ja=i(dt,"DIV",{class:!0});var vt=n(ja);$a=i(vt,"LABEL",{for:!0,class:!0});var ft=n($a);Ga=o(ft,"Conacto"),ft.forEach(r),za=d(vt),Ja=i(vt,"INPUT",{type:!0,id:!0,class:!0}),vt.forEach(r),dt.forEach(r),Ka=d(ct),Wa=i(ct,"DIV",{class:!0});var ht=n(Wa);Ya=i(ht,"DIV",{class:!0});var mt=n(Ya);Za=i(mt,"LABEL",{for:!0,class:!0});var Et=n(Za);Qa=o(Et,"DIRECCION FISCAL"),Et.forEach(r),Xa=d(mt),ae=i(mt,"INPUT",{type:!0,id:!0,class:!0}),mt.forEach(r),ee=d(ht),te=i(ht,"DIV",{class:!0});var yt=n(te);le=i(yt,"LABEL",{for:!0,class:!0});var It=n(le);se=o(It,"Código postal"),It.forEach(r),ce=d(yt),ie=i(yt,"INPUT",{type:!0,id:!0,class:!0}),yt.forEach(r),ht.forEach(r),ne=d(ct),oe=i(ct,"DIV",{class:!0});var qt=n(oe);re=i(qt,"DIV",{class:!0});var xt=n(re);de=i(xt,"LABEL",{for:!0,class:!0});var bt=n(de);ue=o(bt,"POBLACIÓN"),bt.forEach(r),pe=d(xt),ve=i(xt,"INPUT",{type:!0,id:!0,class:!0}),xt.forEach(r),fe=d(qt),he=i(qt,"DIV",{class:!0});var At=n(he);me=i(At,"LABEL",{for:!0,class:!0});var gt=n(me);Ee=o(gt,"País"),gt.forEach(r),ye=d(At),Ie=i(At,"INPUT",{type:!0,id:!0,class:!0}),At.forEach(r),qt.forEach(r),ct.forEach(r),qe=d(h),xe=i(h,"DIV",{class:!0});var Nt=n(xe);be=i(Nt,"H2",{});var Tt=n(be);Ae=o(Tt,"Conceptos"),Tt.forEach(r),ge=d(Nt),Ne=i(Nt,"P",{class:!0});var Ct=n(Ne);Te=o(Ct,"Cada vez que añadas un producto/servicio nuevo, este se guardara automatiamente."),Ct.forEach(r),Ce=d(Nt),Xe&&Xe.l(Nt),De=d(Nt),Le=i(Nt,"DIV",{class:!0});var Dt=n(Le);Pe=i(Dt,"INPUT",{type:!0,id:!0,min:!0,class:!0,placeholder:!0}),Ue=d(Dt),Re=i(Dt,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),we=d(Dt),Oe=i(Dt,"INPUT",{type:!0,id:!0,min:!0,max:!0,class:!0,placeholder:!0}),Ve=d(Dt),Fe=i(Dt,"INPUT",{type:!0,id:!0,step:!0,class:!0,placeholder:!0}),Dt.forEach(r),Be=d(Nt),_e=i(Nt,"DIV",{class:!0});var Lt=n(_e);ke=o(Lt,"AÑADIR PRODUCTO/SERVICIO"),Lt.forEach(r),Nt.forEach(r),Se=d(h),Me=i(h,"DIV",{class:!0});var Pt=n(Me);He=i(Pt,"BUTTON",{class:!0});var Ut=n(He);je=o(Ut,"GUARDAR CAMBIOS"),Ut.forEach(r),$e=d(Pt),Ge=i(Pt,"A",{href:!0,class:!0});var Rt=n(Ge);ze=o(Rt,"CANCELAR"),Rt.forEach(r),Pt.forEach(r),h.forEach(r),this.h()},h(){u(t,"class","svelte-onqdit"),u(A,"class","svelte-onqdit"),u(w,"class","succ semi svelte-onqdit"),u(B,"class","link semi svelte-onqdit"),u(S,"class","err semi svelte-onqdit"),u(U,"class","io-wrapper row jcenter xfill svelte-onqdit"),u(e,"class","header col fcenter xfill svelte-onqdit"),u(K,"class","notice svelte-onqdit"),u(X,"for","legal_name"),u(X,"class","svelte-onqdit"),u(ta,"type","number"),u(ta,"id","legal_name"),u(ta,"class","xfill svelte-onqdit"),ta.required=!0,u(Q,"class","input-wrapper col grow svelte-onqdit"),u(ia,"for","day"),u(ia,"class","svelte-onqdit"),u(ra,"type","number"),u(ra,"id","day"),u(ra,"min","1"),u(ra,"max","31"),u(ra,"class","xfill svelte-onqdit"),ra.required=!0,u(ca,"class","input-wrapper date col svelte-onqdit"),u(pa,"for","month"),u(pa,"class","svelte-onqdit"),u(ha,"type","number"),u(ha,"id","month"),u(ha,"min","1"),u(ha,"max","12"),u(ha,"class","xfill svelte-onqdit"),ha.required=!0,u(ua,"class","input-wrapper date col svelte-onqdit"),u(ya,"for","year"),u(ya,"class","svelte-onqdit"),u(xa,"type","number"),u(xa,"id","year"),u(xa,"class","xfill svelte-onqdit"),xa.required=!0,u(Ea,"class","input-wrapper date col svelte-onqdit"),u(sa,"class","date-row row xhalf svelte-onqdit"),u(Z,"class","row xfill"),u($,"class","box round col xfill svelte-onqdit"),u(Ca,"class","notice svelte-onqdit"),u(Ua,"for","legal_name"),u(Ua,"class","svelte-onqdit"),u(Oa,"type","text"),u(Oa,"id","leagal_name"),u(Oa,"class","xfill svelte-onqdit"),Oa.required=!0,u(Pa,"class","input-wrapper col xfill svelte-onqdit"),u(_a,"for","legal_id"),u(_a,"class","svelte-onqdit"),u(Ma,"type","text"),u(Ma,"id","leagal_id"),u(Ma,"class","xfill svelte-onqdit"),Ma.required=!0,u(Ba,"class","input-wrapper col xhalf svelte-onqdit"),u($a,"for","contact"),u($a,"class","svelte-onqdit"),u(Ja,"type","text"),u(Ja,"id","contact"),u(Ja,"class","xfill svelte-onqdit"),Ja.required=!0,u(ja,"class","input-wrapper col xhalf svelte-onqdit"),u(Fa,"class","row xfill"),u(Za,"for","address"),u(Za,"class","svelte-onqdit"),u(ae,"type","text"),u(ae,"id","address"),u(ae,"class","xfill svelte-onqdit"),ae.required=!0,u(Ya,"class","input-wrapper col xhalf svelte-onqdit"),u(le,"for","cp"),u(le,"class","svelte-onqdit"),u(ie,"type","text"),u(ie,"id","cp"),u(ie,"class","xfill svelte-onqdit"),ie.required=!0,u(te,"class","col xhalf"),u(Wa,"class","row xfill"),u(de,"for","city"),u(de,"class","svelte-onqdit"),u(ve,"type","text"),u(ve,"id","city"),u(ve,"class","xfill svelte-onqdit"),ve.required=!0,u(re,"class","input-wrapper col xhalf svelte-onqdit"),u(me,"for","country"),u(me,"class","svelte-onqdit"),u(Ie,"type","text"),u(Ie,"id","country"),u(Ie,"class","xfill svelte-onqdit"),Ie.required=!0,u(he,"class","input-wrapper col xhalf svelte-onqdit"),u(oe,"class","row xfill"),u(Aa,"class","box round col xfill svelte-onqdit"),u(Ne,"class","notice svelte-onqdit"),u(Pe,"type","number"),u(Pe,"id","amount"),u(Pe,"min","1"),u(Pe,"class","out svelte-onqdit"),u(Pe,"placeholder","CANT"),u(Re,"type","text"),u(Re,"id","label"),u(Re,"class","out grow svelte-onqdit"),u(Re,"placeholder","CONCEPTO"),u(Oe,"type","number"),u(Oe,"id","dto"),u(Oe,"min","0"),u(Oe,"max","100"),u(Oe,"class","out svelte-onqdit"),u(Oe,"placeholder","DTO %"),u(Fe,"type","number"),u(Fe,"id","price"),u(Fe,"step","0.01"),u(Fe,"class","out svelte-onqdit"),u(Fe,"placeholder","UNIDAD €"),u(Le,"class","new-line row xfill"),u(_e,"class","line-btn pri xfill svelte-onqdit"),u(xe,"class","box round col xfill svelte-onqdit"),u(He,"class","succ semi svelte-onqdit"),u(Ge,"href","/facturas"),u(Ge,"class","btn out semi svelte-onqdit"),u(Me,"class","row jcenter xfill"),u(j,"class","bill-data col acenter xfill svelte-onqdit")},m(l,s){p(l,e,s),v(e,t),v(t,I),v(t,x),v(e,b),v(e,A),v(A,g),v(A,N),v(A,T),v(A,C),v(A,D),v(A,L),v(e,P),v(e,U),v(U,w),v(w,O),v(U,V),v(U,B),v(B,_),v(U,k),v(U,S),v(S,M),p(l,H,s),p(l,j,s),v(j,$),v($,G),v(G,z),v($,J),v($,K),v(K,W),v($,Y),v($,Z),v(Z,Q),v(Q,X),v(X,aa),v(Q,ea),v(Q,ta),f(ta,a[0].number),v(Z,la),v(Z,sa),v(sa,ca),v(ca,ia),v(ia,na),v(ca,oa),v(ca,ra),f(ra,a[0].date.day),v(sa,da),v(sa,ua),v(ua,pa),v(pa,va),v(ua,fa),v(ua,ha),f(ha,a[0].date.month),v(sa,ma),v(sa,Ea),v(Ea,ya),v(ya,Ia),v(Ea,qa),v(Ea,xa),f(xa,a[0].date.year),v(j,ba),v(j,Aa),v(Aa,ga),v(ga,Na),v(Aa,Ta),v(Aa,Ca),v(Ca,Da),v(Aa,La),v(Aa,Pa),v(Pa,Ua),v(Ua,Ra),v(Pa,wa),v(Pa,Oa),f(Oa,a[0].client.legal_name),v(Aa,Va),v(Aa,Fa),v(Fa,Ba),v(Ba,_a),v(_a,ka),v(Ba,Sa),v(Ba,Ma),f(Ma,a[0].client.legal_id),v(Fa,Ha),v(Fa,ja),v(ja,$a),v($a,Ga),v(ja,za),v(ja,Ja),f(Ja,a[0].client.contact),v(Aa,Ka),v(Aa,Wa),v(Wa,Ya),v(Ya,Za),v(Za,Qa),v(Ya,Xa),v(Ya,ae),f(ae,a[0].client.address),v(Wa,ee),v(Wa,te),v(te,le),v(le,se),v(te,ce),v(te,ie),f(ie,a[0].client.cp),v(Aa,ne),v(Aa,oe),v(oe,re),v(re,de),v(de,ue),v(re,pe),v(re,ve),f(ve,a[0].client.city),v(oe,fe),v(oe,he),v(he,me),v(me,Ee),v(he,ye),v(he,Ie),f(Ie,a[0].client.country),v(j,qe),v(j,xe),v(xe,be),v(be,Ae),v(xe,ge),v(xe,Ne),v(Ne,Te),v(xe,Ce),Xe&&Xe.m(xe,null),v(xe,De),v(xe,Le),v(Le,Pe),f(Pe,a[5].amount),v(Le,Ue),v(Le,Re),f(Re,a[5].label),v(Le,we),v(Le,Oe),f(Oe,a[5].dto),v(Le,Ve),v(Le,Fe),f(Fe,a[5].price),v(xe,Be),v(xe,_e),v(_e,ke),v(j,Se),v(j,Me),v(Me,He),v(He,je),v(Me,$e),v(Me,Ge),v(Ge,ze),Je||(Ke=[h(w,"click",a[7]),h(B,"click",F),h(S,"click",a[8]),h(ta,"input",a[12]),h(ra,"input",a[13]),h(ha,"input",a[14]),h(xa,"input",a[15]),h(Oa,"input",a[16]),h(Ma,"input",a[17]),h(Ja,"input",a[18]),h(ae,"input",a[19]),h(ie,"input",a[20]),h(ve,"input",a[21]),h(Ie,"input",a[22]),h(Pe,"input",a[28]),h(Re,"input",a[29]),h(Oe,"input",a[30]),h(Fe,"input",a[31]),h(_e,"click",a[9]),h(j,"submit",m(a[11]))],Je=!0)},p(a,e){1&e[0]&&We!==(We=a[0].number+"")&&E(x,We),1&e[0]&&Ye!==(Ye=a[0].date.day+"")&&E(N,Ye),1&e[0]&&Ze!==(Ze=a[0].date.month+"")&&E(C,Ze),1&e[0]&&Qe!==(Qe=a[0].date.year+"")&&E(L,Qe),1&e[0]&&y(ta.value)!==a[0].number&&f(ta,a[0].number),1&e[0]&&y(ra.value)!==a[0].date.day&&f(ra,a[0].date.day),1&e[0]&&y(ha.value)!==a[0].date.month&&f(ha,a[0].date.month),1&e[0]&&y(xa.value)!==a[0].date.year&&f(xa,a[0].date.year),1&e[0]&&Oa.value!==a[0].client.legal_name&&f(Oa,a[0].client.legal_name),1&e[0]&&Ma.value!==a[0].client.legal_id&&f(Ma,a[0].client.legal_id),1&e[0]&&Ja.value!==a[0].client.contact&&f(Ja,a[0].client.contact),1&e[0]&&ae.value!==a[0].client.address&&f(ae,a[0].client.address),1&e[0]&&ie.value!==a[0].client.cp&&f(ie,a[0].client.cp),1&e[0]&&ve.value!==a[0].client.city&&f(ve,a[0].client.city),1&e[0]&&Ie.value!==a[0].client.country&&f(Ie,a[0].client.country),a[0].items.length>0?Xe?Xe.p(a,e):(Xe=R(a),Xe.c(),Xe.m(xe,De)):Xe&&(Xe.d(1),Xe=null),32&e[0]&&y(Pe.value)!==a[5].amount&&f(Pe,a[5].amount),32&e[0]&&Re.value!==a[5].label&&f(Re,a[5].label),32&e[0]&&y(Oe.value)!==a[5].dto&&f(Oe,a[5].dto),32&e[0]&&y(Fe.value)!==a[5].price&&f(Fe,a[5].price)},d(a){a&&r(e),a&&r(H),a&&r(j),Xe&&Xe.d(),Je=!1,q(Ke)}}}function R(a){let e,t,f,h,m,y,q,b,A,g,N,T,C,D,L,U,R,V,F,B,_,k,S,M,H,j,$,G,z,J,K,W,Y,Z=a[3]().toFixed(2)+"",Q=a[4].iva+"",X=a[2]().toFixed(2)+"",aa=a[6]().toFixed(2)+"",ea=a[0].items,ta=[];for(let l=0;l<ea.length;l+=1)ta[l]=w(P(a,ea,l));let la=a[4].ret&&O(a);return{c(){e=l("ul");for(let a=0;a<ta.length;a+=1)ta[a].c();t=c(),f=l("h-div"),h=c(),m=l("ul"),y=l("li"),q=l("p"),b=s("Base imponible"),A=c(),g=l("h3"),N=s(Z),T=s("€"),C=c(),D=l("li"),L=l("p"),U=s("IVA "),R=s(Q),V=s("%"),F=c(),B=l("h3"),_=s(X),k=s("€"),S=c(),la&&la.c(),M=c(),H=l("li"),j=l("p"),$=s("Total"),G=c(),z=l("h3"),J=s(aa),K=s("€"),W=c(),Y=l("h-div"),this.h()},l(a){e=i(a,"UL",{class:!0});var l=n(e);for(let e=0;e<ta.length;e+=1)ta[e].l(l);l.forEach(r),t=d(a),f=i(a,"H-DIV",{class:!0}),n(f).forEach(r),h=d(a),m=i(a,"UL",{class:!0});var s=n(m);y=i(s,"LI",{class:!0});var c=n(y);q=i(c,"P",{class:!0});var u=n(q);b=o(u,"Base imponible"),u.forEach(r),A=d(c),g=i(c,"H3",{});var p=n(g);N=o(p,Z),T=o(p,"€"),p.forEach(r),c.forEach(r),C=d(s),D=i(s,"LI",{class:!0});var v=n(D);L=i(v,"P",{class:!0});var E=n(L);U=o(E,"IVA "),R=o(E,Q),V=o(E,"%"),E.forEach(r),F=d(v),B=i(v,"H3",{});var I=n(B);_=o(I,X),k=o(I,"€"),I.forEach(r),v.forEach(r),S=d(s),la&&la.l(s),M=d(s),H=i(s,"LI",{class:!0});var x=n(H);j=i(x,"P",{class:!0});var P=n(j);$=o(P,"Total"),P.forEach(r),G=d(x),z=i(x,"H3",{});var w=n(z);J=o(w,aa),K=o(w,"€"),w.forEach(r),x.forEach(r),s.forEach(r),W=d(a),Y=i(a,"H-DIV",{class:!0}),n(Y).forEach(r),this.h()},h(){u(e,"class","bill-items col acenter xfill"),I(f,"class","svelte-onqdit"),u(q,"class","label"),u(y,"class","col acenter svelte-onqdit"),u(L,"class","label"),u(D,"class","col acenter svelte-onqdit"),u(j,"class","label"),u(H,"class","col acenter svelte-onqdit"),u(m,"class","total-wrapper row jaround xfill svelte-onqdit"),I(Y,"class","svelte-onqdit")},m(a,l){p(a,e,l);for(let t=0;t<ta.length;t+=1)ta[t].m(e,null);p(a,t,l),p(a,f,l),p(a,h,l),p(a,m,l),v(m,y),v(y,q),v(q,b),v(y,A),v(y,g),v(g,N),v(g,T),v(m,C),v(m,D),v(D,L),v(L,U),v(L,R),v(L,V),v(D,F),v(D,B),v(B,_),v(B,k),v(m,S),la&&la.m(m,null),v(m,M),v(m,H),v(H,j),v(j,$),v(H,G),v(H,z),v(z,J),v(z,K),p(a,W,l),p(a,Y,l)},p(a,t){if(1025&t[0]){let l;for(ea=a[0].items,l=0;l<ea.length;l+=1){const s=P(a,ea,l);ta[l]?ta[l].p(s,t):(ta[l]=w(s),ta[l].c(),ta[l].m(e,null))}for(;l<ta.length;l+=1)ta[l].d(1);ta.length=ea.length}8&t[0]&&Z!==(Z=a[3]().toFixed(2)+"")&&E(N,Z),16&t[0]&&Q!==(Q=a[4].iva+"")&&E(R,Q),4&t[0]&&X!==(X=a[2]().toFixed(2)+"")&&E(_,X),a[4].ret?la?la.p(a,t):(la=O(a),la.c(),la.m(m,M)):la&&(la.d(1),la=null),64&t[0]&&aa!==(aa=a[6]().toFixed(2)+"")&&E(J,aa)},d(a){a&&r(e),x(ta,a),a&&r(t),a&&r(f),a&&r(h),a&&r(m),la&&la.d(),a&&r(W),a&&r(Y)}}}function w(a){let e,t,s,o,m,E,I,x,b,A,g,N,T;function C(){a[23].call(t,a[35],a[36])}function D(){a[24].call(o,a[35],a[36])}function L(){a[25].call(E,a[35],a[36])}function P(){a[26].call(x,a[35],a[36])}function U(){return a[27](a[36])}return{c(){e=l("li"),t=l("input"),s=c(),o=l("input"),m=c(),E=l("input"),I=c(),x=l("input"),b=c(),A=l("input"),g=c(),this.h()},l(a){e=i(a,"LI",{class:!0});var l=n(e);t=i(l,"INPUT",{type:!0,id:!0,min:!0,class:!0,placeholder:!0}),s=d(l),o=i(l,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),m=d(l),E=i(l,"INPUT",{type:!0,id:!0,min:!0,max:!0,class:!0,placeholder:!0}),I=d(l),x=i(l,"INPUT",{type:!0,id:!0,step:!0,class:!0,placeholder:!0}),b=d(l),A=i(l,"INPUT",{type:!0,class:!0}),g=d(l),l.forEach(r),this.h()},h(){u(t,"type","number"),u(t,"id","amount"),u(t,"min","1"),u(t,"class","out svelte-onqdit"),u(t,"placeholder","CANT"),u(o,"type","text"),u(o,"id","label"),u(o,"class","out grow svelte-onqdit"),u(o,"placeholder","CONCEPTO"),u(E,"type","number"),u(E,"id","dto"),u(E,"min","0"),u(E,"max","100"),u(E,"class","out svelte-onqdit"),u(E,"placeholder","DTO %"),u(x,"type","number"),u(x,"id","price"),u(x,"step","0.01"),u(x,"class","out svelte-onqdit"),u(x,"placeholder","UNIDAD €"),u(A,"type","text"),A.value="x",u(A,"class","out svelte-onqdit"),u(e,"class","line row xfill svelte-onqdit")},m(l,c){p(l,e,c),v(e,t),f(t,a[34].amount),v(e,s),v(e,o),f(o,a[34].label),v(e,m),v(e,E),f(E,a[34].dto),v(e,I),v(e,x),f(x,a[34].price),v(e,b),v(e,A),v(e,g),N||(T=[h(t,"input",C),h(o,"input",D),h(E,"input",L),h(x,"input",P),h(A,"click",U)],N=!0)},p(e,l){a=e,1&l[0]&&y(t.value)!==a[34].amount&&f(t,a[34].amount),1&l[0]&&o.value!==a[34].label&&f(o,a[34].label),1&l[0]&&y(E.value)!==a[34].dto&&f(E,a[34].dto),1&l[0]&&y(x.value)!==a[34].price&&f(x,a[34].price)},d(a){a&&r(e),N=!1,q(T)}}}function O(a){let e,t,f,h,m,y,I,q,x,b,A=a[4].ret+"",g=a[1]().toFixed(2)+"";return{c(){e=l("li"),t=l("p"),f=s("IRPF "),h=s(A),m=s("%"),y=c(),I=l("h3"),q=s("-"),x=s(g),b=s("€"),this.h()},l(a){e=i(a,"LI",{class:!0});var l=n(e);t=i(l,"P",{class:!0});var s=n(t);f=o(s,"IRPF "),h=o(s,A),m=o(s,"%"),s.forEach(r),y=d(l),I=i(l,"H3",{});var c=n(I);q=o(c,"-"),x=o(c,g),b=o(c,"€"),c.forEach(r),l.forEach(r),this.h()},h(){u(t,"class","label"),u(e,"class","col acenter svelte-onqdit")},m(a,l){p(a,e,l),v(e,t),v(t,f),v(t,h),v(t,m),v(e,y),v(e,I),v(I,q),v(I,x),v(I,b)},p(a,e){16&e[0]&&A!==(A=a[4].ret+"")&&E(h,A),2&e[0]&&g!==(g=a[1]().toFixed(2)+"")&&E(x,g)},d(a){a&&r(e)}}}function V(a){let e,t,s,o,f,h,m=a[0]&&U(a);return{c(){e=l("meta"),t=l("meta"),s=l("meta"),o=l("meta"),f=c(),h=l("div"),m&&m.c(),this.h()},l(a){const l=b('[data-svelte="svelte-zpfq6b"]',document.head);e=i(l,"META",{property:!0,content:!0}),t=i(l,"META",{property:!0,content:!0}),s=i(l,"META",{name:!0,content:!0}),o=i(l,"META",{property:!0,content:!0}),l.forEach(r),f=d(a),h=i(a,"DIV",{class:!0});var c=n(h);m&&m.l(c),c.forEach(r),this.h()},h(){document.title="Editar factura | Facturas gratis",u(e,"property","og:title"),u(e,"content","Editar factura | Facturas gratis"),u(t,"property","og:site_name"),u(t,"content","Facturas gratis"),u(s,"name","description"),u(s,"content","Herramientas online y completamente gratuitas para generar, enviar, rectificar y listar facturas, presupuestos, albaranes,\r\n  clientes, proveedores y productos/servicios."),u(o,"property","og:description"),u(o,"content","Herramientas online y completamente gratuitas para generar, enviar, rectificar y listar facturas, presupuestos, albaranes,\r\n  clientes, proveedores y productos/servicios."),u(h,"class","scroll")},m(a,l){v(document.head,e),v(document.head,t),v(document.head,s),v(document.head,o),p(a,f,l),p(a,h,l),m&&m.m(h,null)},p(a,e){a[0]?m?m.p(a,e):(m=U(a),m.c(),m.m(h,null)):m&&(m.d(1),m=null)},i:A,o:A,d(a){r(e),r(t),r(s),r(o),a&&r(f),a&&r(h),m&&m.d()}}}function F(){console.log("Generating...")}function B(a,e,t){let l,s,c,i,n,o,r;g(a,D,(a=>t(32,n=a))),g(a,L,(a=>t(4,o=a))),g(a,T,(a=>t(33,r=a)));let d=n.filter((a=>a._id===r.params.id))[0],u={};function p(a){d.items.splice(a,1),t(0,d)}return a.$$.update=()=>{1&a.$$.dirty[0]&&t(3,l=()=>d.items.reduce(((a,e)=>{const t=e.price*e.amount;if(e.dto>0){return a+(t-t*e.dto/100)}return a+t}),0)),24&a.$$.dirty[0]&&t(2,s=()=>l()*o.iva/100),24&a.$$.dirty[0]&&t(1,c=()=>{if(!o.ret)return 0;return l()*o.ret/100}),14&a.$$.dirty[0]&&t(6,i=()=>l()+s()-c())},[d,c,s,l,o,u,i,async function(){try{const a=await fetch("../api/print",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!a.ok)throw await a.text();console.log(await a.json())}catch(a){console.log(a)}},function(){confirm("La numeracion de las otras facturas no se modificara. Recuerda usar la numeracion de esta factura en otra.\n\n¿Borrar definitivamente?")&&(n.splice(n.indexOf(d),1),D.set(n),C("/facturas"))},function(){4===Object.keys(u).length&&(t(0,d.items=[...d.items,u],d),t(5,u={}))},p,function(){d.items.length>0?(t(0,d.totals={base:l(),iva:s(),ret:c(),total:i()},d),N(D,n=n.map((a=>a._id===d._id?d:a)),n),C("/facturas")):alert("⚠ No has añadido ningun concepto ⚠")},function(){d.number=y(this.value),t(0,d)},function(){d.date.day=y(this.value),t(0,d)},function(){d.date.month=y(this.value),t(0,d)},function(){d.date.year=y(this.value),t(0,d)},function(){d.client.legal_name=this.value,t(0,d)},function(){d.client.legal_id=this.value,t(0,d)},function(){d.client.contact=this.value,t(0,d)},function(){d.client.address=this.value,t(0,d)},function(){d.client.cp=this.value,t(0,d)},function(){d.client.city=this.value,t(0,d)},function(){d.client.country=this.value,t(0,d)},function(a,e){a[e].amount=y(this.value),t(0,d)},function(a,e){a[e].label=this.value,t(0,d)},function(a,e){a[e].dto=y(this.value),t(0,d)},function(a,e){a[e].price=y(this.value),t(0,d)},a=>p(a),function(){u.amount=y(this.value),t(5,u)},function(){u.label=this.value,t(5,u)},function(){u.dto=y(this.value),t(5,u)},function(){u.price=y(this.value),t(5,u)}]}class _ extends a{constructor(a){super(),e(this,a,B,V,t,{},null,[-1,-1])}}export{_ as default};
